<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mintwebb AR-Viewer</title>
    <!-- Import the component -->
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
    <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    <link rel="stylesheet" href="test.css" />
    <style>
      /* body {
        background-color: #fff;
      }
      #container {
        visibility: hidden;
        height: 0px;
        width: 0px;
      }
      #AR_trigger {
        color: #000;
        background-color: white;
        padding: 10px;
        text-transform: uppercase;
        cursor: pointer;
        display: block;
        font-size: 16px;
        display: grid;
        grid-template-columns: auto auto;
        place-items: center;
        transition: 1s;
      }
      #AR_trigger:hover {
        color: #000;
        background-color: rgb(193, 255, 193);
        padding: 10px;
        text-transform: uppercase;
        cursor: pointer;
        display: block;
        font-size: 16px;
        display: grid;
        grid-template-columns: auto auto;
        place-items: center;
      }

      p {
        margin: 0;
        width: auto;
        font-size: 12px;
      }

      img {
        height: 30px;
      } */
    </style>
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />


    </script>
  </head>
  <body>
    <!-- src and ios-src is set in index.js -->
    <div id="container">
      <model-viewer
        id="the-viewer"
        alt="3D model of product"
        src="<%= android_src %>"
        ios-src="<%= ios_src %>"
        ar
        ar-placement="wall"
        ar-modes="webxr scene-viewer quick-look"
        camera-controls
      ></model-viewer>
    </div>

    <label class="drop">
      <input type="checkbox" id="target-drop-example" />
      <!-- Toggle Drop -->
      <span class="control">
        <img src="logo-1.png" alt="camera-logo" />
        <%= button_text || "ViewInAr"%></span
      >
      <!-- Fake button -->
      <!-- Items -->
      <ul class="drop-items">
        <%sizes_used.forEach(function(size){ %>
        <li class="item-drop" onClick="myFunction(`<%= size %>`, `<%= android_src %>`, `<%= ios_src %>`)">
            <%= size %>
        </li>
        <%
      })%>
      </ul>
      <!-- Alternative to close dropdown with click out -->
      <label for="target-drop-example" class="overlay-close"></label>
    </label>
    <!-- END -- Dropdown -->

    <script>
     function myFunction(size, src, ios){
        let iphone_src = ios + size
        let android_src = src + size
        document.getElementById("the-viewer").setAttribute("src", android_src);
        document.getElementById("the-viewer").setAttribute("ios-src", iphone_src);
        
      }
      let AR_trigger = document.getElementById("AR_trigger");
      let viewer = document.getElementById("the-viewer");

      // Run activateAR() when a user clicks on the AR_trigger button
      AR_trigger.addEventListener("click", () => {
        viewer.activateAR();
      });
    </script>
  </body>
</html>
